function dynamicSize(){var a=$(document).width();($("body").hasClass("page-template-page-inspiration")||$("body").hasClass("page-template-page-instagram"))&&(console.log("big"),a>=1200?$(".item").removeClass("fourcol twocol").addClass("fivecol"):a<1200&&a>=768?$(".item").removeClass("fivecol twocol").addClass("fourcol"):a<767&&a>=490&&$(".item").removeClass("fivecol fourcol").addClass("twocol"),w>320&&menu.is(":hidden")&&menu.removeAttr("style"))}function overlay(a){var b=$('[data-slide-id="'+a+'"]');totalSlides=$(".grid-item--partner").length,console.log(b);var c,d=$(b).data("id"),e=$(b).find("a").data("name"),f=$(b).find("a").data("title"),g=$(b).find("a").data("credentials"),h=$(b).find("a").data("bio"),i=$(b).find("a").data("largesrc"),j=$(b).find("a").data("resume"),k=$(b).find("a").data("link");c=""==j?"":'<a target="_blank" href="'+j+'">Resume</a>',console.log(d,k),partnerSub(d,k),$(".overlay").addClass("open"),$(".overlay .content").html('<header><h2><img class="header-img" src="'+i+'" /><span class="comma">'+e+'</span> <span class="small">'+g+"</span></h2><h3>"+f+'</h3></header><article><div class="left">'+h+c+'</div><div class="right"><img src="'+i+'" /></div><div class="sub"></div></article>')}function partnerSub(a,b){$.ajax({type:"POST",url:"/overlay-team.php",data:{id:a},success:function(a){console.log(a),$(".sub").append(a)}})}function replaceMentions(a){return a.replace(/@([a-z\d_]+)/gi,'<a href="http://twitter.com/$1">@$1</a>')}function replaceHash(a){return a.replace(/#([a-zA-Z0-9]+)/g,'<a href="http://twitter.com/hashtag/$1">#$1</a>')}function initMap(){var a={lat:40.743371,lng:-73.990508},b=new google.maps.Map(document.getElementById("map"),{zoom:15,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}],center:a});new google.maps.Marker({position:a,map:b})}function debounce(a,b){var c;return function(){function d(){a(),c=null}c&&clearTimeout(c),setTimeout(d,b||100)}}function filterDisplay(a,b,c){c.attr("class");1==b?".Architecture"==a?(console.log("filterDisplay: Architecture"),$(".filter").fadeOut(),$(".filter"+a).delay(100).fadeIn()):$("ul.Interiors").is(":hidden")&&(console.log("ya"),$(".filter").fadeOut(),$(".filter"+a).fadeIn()):c.parents("ul").hasClass("Architecture")?(console.log("true"),$("ul.Architecture").is(":visible")||(console.log("arch"),$(".filter").fadeOut(),$(".filter.Architecture").delay(100).fadeIn())):a.search("interiors")!=-1||a.search("environments")!=-1?($(".filter.Interiors").is(":visible")||(console.log("ya1"),$(".filter").fadeOut(),$(".filter.Interiors").fadeIn()),$("a.Interiors").hasClass("selected")||($("a.Interiors input").prop("checked",!0),$("a.Interiors").parents("li").addClass("selected"))):a.search(".sustainability")!=-1?($(".filter--three").fadeOut(100),$("a.sustainability input, a.Architecture input").prop("checked",!0),$("a.sustainability, a.Architecture").parent("li").addClass("selected"),$(".filter--two.Architecture").delay(100).fadeIn()):a.search(".preservation")!=-1?(console.log("filterDisplay: Preservation"),$("a.preservation input, a.Architecture input").prop("checked",!0),$(".filter.Interiors, .filter--three.Architecture").fadeOut(0),$(".filter--two.Architecture,.filter--three.Preservation").delay(400).fadeIn()):a.search(".sustainability")!=-1||a.search(".preservation")!=-1||c.parents("ul").hasClass("Interiors")||($(".filter--three").fadeOut(100),$(".filter--three.Architecture").delay(400).fadeIn())}function reset(a){console.log("reset & all: "+a),$(".quicksearch").val(""),buttonFilter="",qsRegex="",window.location.hash="",$grid.isotope(),0==a?($(".filter a").find(":input").prop("checked",!1),$(".filter li").removeClass("selected")):($("#filters a").find(":input").prop("checked",!1),$("#filters li").removeClass("selected")),$(".filter--two,.filter--three").fadeOut()}$(".toplink").click(function(a){return a.preventDefault(),$("html, body").animate({scrollTop:0},600),!1}),$(document).ready(function(){dynamicSize()}),$(window).resize(function(){dynamicSize();var a=$(window).width();a>490&&menu.is(":hidden")&&menu.removeAttr("style")});var pull=$("#pull");if(menu=$(".menu-navigation-container ul"),menuHeight=menu.height(),$(pull).on("click",function(a){a.preventDefault(),menu.slideToggle()}),$("body").hasClass("page-template-page-interiors")){var section1=$(".section1").html();console.log(section1);var w=$(window).width()}else if($("body").hasClass("page-template-page-mobile")){var w=$(window).width();w>900?document.location="/":$("#main").animate({opacity:1}),$(window).resize(function(){var a=$(window).width();a>900?$(".home--mobile").is(":visible")&&($(".home--mobile").animate({opacity:0}),$("#message").animate({opacity:1})):($(".home--mobile").animate({opacity:1}),$("#message").animate({opacity:0}))})}else if($("body").hasClass("home")){var w=$(window).width();w<=900?document.location="mobile":$("#main").delay(0).animate({opacity:1}),$(window).resize(function(){var a=$(window).width();a<900?$(".home--browser").is(":visible")&&($(".home--browser").animate({opacity:0}),$("#message").animate({opacity:1})):($(".home--browser").animate({opacity:1}),$("#message").animate({opacity:0}))});var $grid=$(".grid");$grid.imagesLoaded(function(){$(".grid").masonry({percentPosition:!0,columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".item"})})}else if($("body").hasClass("post-type-archive-lab")){var $grid=$(".grid-lab");$grid.imagesLoaded(function(){$grid.masonry({percentPosition:!0,columnWidth:".grid-sizer",itemSelector:".threecol"}),console.log("grid")})}else if($(".content").hasClass("grid-team")){var $grid=$(".grid-team");$grid.imagesLoaded(function(){$grid.isotope({percentPosition:!0,itemSelector:".grid-item",layoutMode:"packery",filter:filterSelector,packery:{gutter:".gutter-sizer"}}),$(".grid-team").animate({opacity:1})});var slideID;$(".grid-item--partner").on("click",function(){slideID=$(this).data("slide-id"),console.log(slideID),overlay(slideID)}),$(".close").on("click",function(){console.log("fa"),$(".overlay").removeClass("open")}),$(".prev, .next").click(function(){return $(this).hasClass("next")?slideID!=totalSlides?slideID++:slideID=1:1!=slideID?slideID--:slideID=totalSlides,dataID=$('[data-slide="'+slideID+'"]').attr("id"),overlay(slideID),!1}),$(".grid-item--staff").hover(function(){$(this).removeClass("bw")},function(){$(this).addClass("bw")})}else if($("body").hasClass("page-template-page-recognition")||$("body").hasClass("page-id-5361")||$("body").hasClass("tag")){var headers=$(".accordion-header"),contentAreas=$(".accordion-content").hide(),expandLink=$(".accordion-expand-all");headers.click(function(){var a=$(this).find(".arrow"),b=$(this).next(),c=b.is(":visible");return b[c?"slideUp":"slideDown"]().trigger(c?"hide":"show"),a.toggleClass("open"),!1}),expandLink.click(function(){var a=$(this).data("isAllOpen");contentAreas[a?"hide":"show"]().trigger(a?"hide":"show")}),contentAreas.on({show:function(){var a=!contentAreas.is(":hidden");a&&expandLink.text("Collapse All").data("isAllOpen",!0)},hide:function(){var a=!contentAreas.is(":hidden");a||expandLink.text("Expand all").data("isAllOpen",!1)}});var user="bkskarchitects";$.ajax({url:"/twitterproxy.php?url="+encodeURIComponent("statuses/user_timeline.json?screen_name="+user+"&count=4"),type:"GET",success:function(a){var b=[];for(i in a){console.log(a);var c=a[i],d=c.text;d=d.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,function(a){return'<a href="'+a+'">'+a+"</a>"}).replace(/B@([_a-z0-9]+)/gi,function(a){return a.charAt(0)+'<a href="http://twitter.com/'+a.substring(1)+'">'+a.substring(1)+"</a>"}),d=replaceMentions(d),d=replaceHash(d);var e=c.created_at,f=e.split(" "),g=f[1]+" "+f[2];name=c.user.screen_name;var h='<span class="gray"><a href="http://twitter.com/'+name+'" target="_blank">@'+name+"</a> - "+g+"</span><p>"+d+"</p>";b.push(h);b.join("");$(".twitter").html(b)}},error:function(a){console.log(a)}})}else if($("body").hasClass("page-id-2"));else if($("body").hasClass("single-work"))$(document).on("ready",function(){function a(){$("#slides img").css("maxWidth",(.9*$(window).width()|0)+"px")}a(),$(window).bind("resize",a)}),$("#slides").slick({centerMode:!0,centerPadding:"3%",slidesToShow:1,variableWidth:!0,draggable:!0,responsive:[{breakpoint:768,settings:{arrows:!1,centerPadding:"0"}}]});else if($("body").hasClass("post-type-archive-work")){var $grid=$("#grid"),all,newDiscipline,filters={},filterSelector=window.location.hash.slice(1);$("#filters a").click(function(){$(".grid-item").removeClass("grid-item--featured"),$("#empty").hide();var a,b=$(this),c=($(this),b.attr("data-filter-name")),d=b.attr("data-filter-value"),e=(b.attr("data-filter-type"),[]),f=$(this).find(":input");if($(f).is(":checked")?$(f).prop("checked",!1):$(f).prop("checked",!0),b.parents("li").hasClass("discipline")){if(!b.parents("li").hasClass("selected")&&$("ul.discipline .selected").length)return console.log("2 disciplines now checked: reset"),all=!1,reset(all),b.parent().addClass("selected"),!1;if(b.parents("li").hasClass("selected")&&b.parents("li").hasClass("discipline")&&2!=$("ul.discipline .selected").length)return console.log("only discipline removed: reset"),all=!1,reset(all),b.parents("li").removeClass("selected"),!1}b.parents("ul").hasClass("specialty")&&$.each(filters,function(a,b){a.indexOf("type")!=-1&&(delete filters[a],$(".project_type li").removeClass("selected"))}),!b.parents("li").hasClass("selected")||b.parents("li").hasClass("discipline")||b.parents("ul").hasClass("specialty")?b.parents("li").hasClass("selected")&&b.parents("li").hasClass("discipline")?(d=".Architecture"==d?".Interiors":".Architecture",filters[c]=d,b.parents("li").removeClass("selected")):b.parents("li").hasClass("selected")&&b.parents("ul").hasClass("specialty")?(console.log("remove"),delete filters[c],$(".specialty").find(".selected").removeClass("selected"),$(".specialty").find("input:checked").prop("checked",!1)):(console.log(filters),filters[c]=d,0!=$("ul.specialty .selected").length&&($(".specialty").find(".selected").removeClass("selected"),$(".specialty").find("input:checked").prop("checked",!1)),b.parent().addClass("selected")):(console.log("delete"),delete filters[c],b.parents("li").removeClass("selected"));for(a in filters)e.push(filters[a]);var g=e.map(function(a){return".featured_A"+a}),h=e.join("");".Architecture"==d||".Interiors"==d?(newDiscipline=!0,filterDisplay(h,newDiscipline,b)):(newDiscipline=!1,filterDisplay(h,newDiscipline,b));var i=g.join(","),j=i.replace(/A\./g,"");return console.log(j),$(j).addClass("grid-item--featured"),$grid.data("isotope")&&(buttonFilter=h,$grid.isotope()),window.location.hash=h,!1});var qsRegex,buttonFilter,$quicksearch=$(".quicksearch").keyup(debounce(function(){qsRegex=new RegExp($quicksearch.val(),"gi"),$grid.isotope()}));if(filterSelector){buttonFilter=filterSelector;var selectorClasses=filterSelector.split(".").slice(1);$.each(selectorClasses,function(a,b){$('#filters a[data-filter-value=".'+b+'"]').click()})}$(".filter--remove").on("click",function(){all=!0,reset(all)}),$grid.imagesLoaded(function(){$(".grid-work").animate({opacity:1}),$grid.isotope({percentPosition:!0,itemSelector:".grid-item",layoutMode:"packery",filter:function(){var a=$(this),b=!qsRegex||a.find("h3").text().match(qsRegex),c=!buttonFilter||a.is(buttonFilter);return b&&c},packery:{gutter:".gutter-sizer"}})}),$grid.on("arrangeComplete",function(a,b){console.log(filter),b.length<=0?$("#empty").fadeIn():$("#empty").hide()})}