function overlay(a){var b=$('[data-slide-id="'+a+'"]');totalSlides=$(".grid-item--partner").length,console.log(b);var c=$(b).data("id"),d=$(b).find("a").data("name"),e=$(b).find("a").data("title"),f=$(b).find("a").data("bio"),g=$(b).find("a").data("largesrc"),h=$(b).find("a").data("resume");console.log(c),partnerSub(c),$(".overlay").addClass("open"),$(".overlay .content").html("<header><h2>"+d+"</h2><h3>"+e+'</h3></header><article><div class="left">'+f+'<a href="'+h+'">Resume</a></div><div class="right"><img src="'+g+'" /></div><div class="sub"></div></article>')}function partnerSub(a){$.ajax({type:"POST",url:"/overlay.php",data:{id:a}}).done(function(a){$(".sub").append(a)})}function initMap(){var a={lat:40.743371,lng:-73.990508},b=new google.maps.Map(document.getElementById("map"),{zoom:15,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}],center:a});new google.maps.Marker({position:a,map:b})}function debounce(a,b){var c;return function(){function d(){a(),c=null}c&&clearTimeout(c),setTimeout(d,b||100)}}function filterDisplay(a,b,c){c.attr("class");1==b?".Architecture"==a?(console.log("filterDisplay: Architecture"),$(".filter").fadeOut(),$(".filter"+a).delay(100).fadeIn()):$("ul.Interiors").is(":hidden")&&(console.log("ya"),$(".filter").fadeOut(),$(".filter"+a).fadeIn()):c.parents("ul").hasClass("Architecture")?(console.log("true"),$("ul.Architecture").is(":visible")||(console.log("arch"),$(".filter").fadeOut(),$(".filter.Architecture").delay(100).fadeIn())):a.search("interiors")!=-1||a.search("environments")!=-1?($(".filter.Interiors").is(":visible")||(console.log("ya1"),$(".filter").fadeOut(),$(".filter.Interiors").fadeIn()),$("a.Interiors").hasClass("selected")||($("a.Interiors input").prop("checked",!0),$("a.Interiors").parents("li").addClass("selected"))):a.search(".sustainability")!=-1?($(".filter--three").fadeOut(100),$("a.sustainability input, a.Architecture input").prop("checked",!0),$("a.sustainability, a.Architecture").parent("li").addClass("selected"),$(".filter--two.Architecture").delay(100).fadeIn()):a.search(".preservation")!=-1?(console.log("filterDisplay: Preservation"),$("a.preservation input, a.Architecture input").prop("checked",!0),$(".filter.Interiors, .filter--three.Architecture").fadeOut(0),$(".filter--two.Architecture,.filter--three.Preservation").delay(400).fadeIn()):a.search(".sustainability")!=-1||a.search(".preservation")!=-1||c.parents("ul").hasClass("Interiors")||($(".filter--three").fadeOut(100),$(".filter--three.Architecture").delay(400).fadeIn())}function reset(a){console.log("reset & all: "+a),$(".quicksearch").val(""),buttonFilter="",qsRegex="",window.location.hash="",$grid.isotope(),0==a?($(".filter a").find(":input").prop("checked",!1),$(".filter li").removeClass("selected")):($("#filters a").find(":input").prop("checked",!1),$("#filters li").removeClass("selected")),$(".filter--two,.filter--three").fadeOut()}if($("body").hasClass("home")){var $grid=$(".grid");$grid.imagesLoaded(function(){$(".grid").masonry({percentPosition:!0,columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".item"}),$("#main").delay(0).animate({opacity:1})})}else if($("body").hasClass("post-type-archive-lab")){var $grid=$(".grid-lab");$grid.imagesLoaded(function(){$grid.masonry({percentPosition:!0,columnWidth:".grid-sizer",itemSelector:".threecol"}),console.log("grid")})}else if($(".content").hasClass("grid-team")){var $grid=$(".grid-team");$grid.imagesLoaded(function(){$grid.isotope({percentPosition:!0,itemSelector:".grid-item",layoutMode:"packery",filter:filterSelector,packery:{gutter:".gutter-sizer"}}),$(".grid-team").animate({opacity:1})});var slideID;$(".grid-item--partner").on("click",function(){slideID=$(this).data("slide-id"),console.log(slideID),overlay(slideID)}),$(".close").on("click",function(){console.log("fa"),$(".overlay").removeClass("open")}),$(".prev, .next").click(function(){return $(this).hasClass("next")?slideID!=totalSlides?slideID++:slideID=1:1!=slideID?slideID--:slideID=totalSlides,dataID=$('[data-slide="'+slideID+'"]').attr("id"),overlay(slideID),!1}),$(".grid-item--staff").hover(function(){$(this).removeClass("bw")},function(){$(this).addClass("bw")})}else if($("body").hasClass("page-id-2"));else{var $grid=$("#grid"),all,newDiscipline,filters={},filterSelector=window.location.hash.slice(1);$("#filters a").click(function(){$(".grid-item").removeClass("grid-item--featured"),$("#empty").hide();var a,b=$(this),c=($(this),b.attr("data-filter-name")),d=b.attr("data-filter-value"),e=(b.attr("data-filter-type"),[]),f=$(this).find(":input");if($(f).is(":checked")?$(f).prop("checked",!1):$(f).prop("checked",!0),b.parents("li").hasClass("discipline")){if(!b.parents("li").hasClass("selected")&&$("ul.discipline .selected").length)return console.log("2 disciplines now checked: reset"),all=!1,reset(all),b.parent().addClass("selected"),!1;if(b.parents("li").hasClass("selected")&&b.parents("li").hasClass("discipline")&&2!=$("ul.discipline .selected").length)return console.log("only discipline removed: reset"),all=!1,reset(all),b.parents("li").removeClass("selected"),!1}b.parents("ul").hasClass("specialty")&&$.each(filters,function(a,b){a.indexOf("type")!=-1&&(delete filters[a],$(".project_type li").removeClass("selected"))}),!b.parents("li").hasClass("selected")||b.parents("li").hasClass("discipline")||b.parents("ul").hasClass("specialty")?b.parents("li").hasClass("selected")&&b.parents("li").hasClass("discipline")?(d=".Architecture"==d?".Interiors":".Architecture",filters[c]=d,b.parents("li").removeClass("selected")):b.parents("li").hasClass("selected")&&b.parents("ul").hasClass("specialty")?(console.log("remove"),delete filters[c],$(".specialty").find(".selected").removeClass("selected"),$(".specialty").find("input:checked").prop("checked",!1)):(console.log(filters),filters[c]=d,0!=$("ul.specialty .selected").length&&($(".specialty").find(".selected").removeClass("selected"),$(".specialty").find("input:checked").prop("checked",!1)),b.parent().addClass("selected")):(console.log("delete"),delete filters[c],b.parents("li").removeClass("selected"));for(a in filters)e.push(filters[a]);var g=e.map(function(a){return".featured_A"+a}),h=e.join("");".Architecture"==d||".Interiors"==d?(newDiscipline=!0,filterDisplay(h,newDiscipline,b)):(newDiscipline=!1,filterDisplay(h,newDiscipline,b));var i=g.join(","),j=i.replace(/A\./g,"");return console.log(j),$(j).addClass("grid-item--featured"),$grid.data("isotope")&&(buttonFilter=h,$grid.isotope()),window.location.hash=h,!1});var qsRegex,buttonFilter,$quicksearch=$(".quicksearch").keyup(debounce(function(){qsRegex=new RegExp($quicksearch.val(),"gi"),$grid.isotope()}));if(filterSelector){buttonFilter=filterSelector;var selectorClasses=filterSelector.split(".").slice(1);$.each(selectorClasses,function(a,b){$('#filters a[data-filter-value=".'+b+'"]').click()})}$(".filter--remove").on("click",function(){all=!0,reset(all)}),$grid.imagesLoaded(function(){$(".grid-work").animate({opacity:1}),$grid.isotope({percentPosition:!0,itemSelector:".grid-item",layoutMode:"packery",filter:function(){var a=$(this),b=!qsRegex||a.find("h3").text().match(qsRegex),c=!buttonFilter||a.is(buttonFilter);return b&&c},packery:{gutter:".gutter-sizer"}})}),$grid.on("arrangeComplete",function(a,b){console.log(filter),b.length<=0?$("#empty").fadeIn():$("#empty").hide()})}